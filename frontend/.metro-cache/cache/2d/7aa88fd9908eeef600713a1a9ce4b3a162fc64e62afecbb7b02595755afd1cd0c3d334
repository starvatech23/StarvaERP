{"dependencies":[{"name":"./accessors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"MCf4WJODknzIV1SmNsfuKtaPEhs=","exportNames":["*"],"imports":1}},{"name":"./hierarchy/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":57,"index":98}}],"key":"bpcOEv8m9Ar3P85eHWr4AO9qGCU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _ref;\n    }\n  });\n  var _accessorsJs = require(_dependencyMap[0], \"./accessors.js\");\n  var _hierarchyIndexJs = require(_dependencyMap[1], \"./hierarchy/index.js\");\n  var keyPrefix = \"$\",\n    // Protect against keys like “__proto__”.\n    preroot = {\n      depth: -1\n    },\n    ambiguous = {};\n  function defaultId(d) {\n    return d.id;\n  }\n  function defaultParentId(d) {\n    return d.parentId;\n  }\n  function _ref() {\n    var id = defaultId,\n      parentId = defaultParentId;\n    function stratify(data) {\n      var d,\n        i,\n        n = data.length,\n        root,\n        parent,\n        node,\n        nodes = new Array(n),\n        nodeId,\n        nodeKey,\n        nodeByKey = {};\n      for (i = 0; i < n; ++i) {\n        d = data[i], node = nodes[i] = new _hierarchyIndexJs.Node(d);\n        if ((nodeId = id(d, i, data)) != null && (nodeId += \"\")) {\n          nodeKey = keyPrefix + (node.id = nodeId);\n          nodeByKey[nodeKey] = nodeKey in nodeByKey ? ambiguous : node;\n        }\n      }\n      for (i = 0; i < n; ++i) {\n        node = nodes[i], nodeId = parentId(data[i], i, data);\n        if (nodeId == null || !(nodeId += \"\")) {\n          if (root) throw new Error(\"multiple roots\");\n          root = node;\n        } else {\n          parent = nodeByKey[keyPrefix + nodeId];\n          if (!parent) throw new Error(\"missing: \" + nodeId);\n          if (parent === ambiguous) throw new Error(\"ambiguous: \" + nodeId);\n          if (parent.children) parent.children.push(node);else parent.children = [node];\n          node.parent = parent;\n        }\n      }\n      if (!root) throw new Error(\"no root\");\n      root.parent = preroot;\n      root.eachBefore(function (node) {\n        node.depth = node.parent.depth + 1;\n        --n;\n      }).eachBefore(_hierarchyIndexJs.computeHeight);\n      root.parent = null;\n      if (n > 0) throw new Error(\"cycle\");\n      return root;\n    }\n    stratify.id = function (x) {\n      return arguments.length ? (id = (0, _accessorsJs.required)(x), stratify) : id;\n    };\n    stratify.parentId = function (x) {\n      return arguments.length ? (parentId = (0, _accessorsJs.required)(x), stratify) : parentId;\n    };\n    return stratify;\n  }\n});","lineCount":79,"map":[[7,2,16,15,"Object"],[7,8,16,15],[7,9,16,15,"defineProperty"],[7,23,16,15],[7,24,16,15,"exports"],[7,31,16,15],[8,4,16,15,"enumerable"],[8,14,16,15],[9,4,16,15,"get"],[9,7,16,15],[9,18,16,15,"get"],[9,19,16,15],[10,6,16,15],[10,13,16,15,"_ref"],[10,17,16,15],[11,4,16,15],[12,2,16,15],[13,2,1,0],[13,6,1,0,"_accessorsJs"],[13,18,1,0],[13,21,1,0,"require"],[13,28,1,0],[13,29,1,0,"_dependencyMap"],[13,43,1,0],[14,2,2,0],[14,6,2,0,"_hierarchyIndexJs"],[14,23,2,0],[14,26,2,0,"require"],[14,33,2,0],[14,34,2,0,"_dependencyMap"],[14,48,2,0],[15,2,4,0],[15,6,4,4,"keyPrefix"],[15,15,4,13],[15,18,4,16],[15,21,4,19],[16,4,4,21],[17,4,5,4,"preroot"],[17,11,5,11],[17,14,5,14],[18,6,5,15,"depth"],[18,11,5,20],[18,13,5,22],[18,14,5,23],[19,4,5,24],[19,5,5,25],[20,4,6,4,"ambiguous"],[20,13,6,13],[20,16,6,16],[20,17,6,17],[20,18,6,18],[21,2,8,0],[21,11,8,9,"defaultId"],[21,20,8,18,"defaultId"],[21,21,8,19,"d"],[21,22,8,20],[21,24,8,22],[22,4,9,2],[22,11,9,9,"d"],[22,12,9,10],[22,13,9,11,"id"],[22,15,9,13],[23,2,10,0],[24,2,12,0],[24,11,12,9,"defaultParentId"],[24,26,12,24,"defaultParentId"],[24,27,12,25,"d"],[24,28,12,26],[24,30,12,28],[25,4,13,2],[25,11,13,9,"d"],[25,12,13,10],[25,13,13,11,"parentId"],[25,21,13,19],[26,2,14,0],[27,2,16,15],[27,11,16,15,"_ref"],[27,16,16,15],[27,18,16,26],[28,4,17,2],[28,8,17,6,"id"],[28,10,17,8],[28,13,17,11,"defaultId"],[28,22,17,20],[29,6,18,6,"parentId"],[29,14,18,14],[29,17,18,17,"defaultParentId"],[29,32,18,32],[30,4,20,2],[30,13,20,11,"stratify"],[30,21,20,19,"stratify"],[30,22,20,20,"data"],[30,26,20,24],[30,28,20,26],[31,6,21,4],[31,10,21,8,"d"],[31,11,21,9],[32,8,22,8,"i"],[32,9,22,9],[33,8,23,8,"n"],[33,9,23,9],[33,12,23,12,"data"],[33,16,23,16],[33,17,23,17,"length"],[33,23,23,23],[34,8,24,8,"root"],[34,12,24,12],[35,8,25,8,"parent"],[35,14,25,14],[36,8,26,8,"node"],[36,12,26,12],[37,8,27,8,"nodes"],[37,13,27,13],[37,16,27,16],[37,20,27,20,"Array"],[37,25,27,25],[37,26,27,26,"n"],[37,27,27,27],[37,28,27,28],[38,8,28,8,"nodeId"],[38,14,28,14],[39,8,29,8,"nodeKey"],[39,15,29,15],[40,8,30,8,"nodeByKey"],[40,17,30,17],[40,20,30,20],[40,21,30,21],[40,22,30,22],[41,6,32,4],[41,11,32,9,"i"],[41,12,32,10],[41,15,32,13],[41,16,32,14],[41,18,32,16,"i"],[41,19,32,17],[41,22,32,20,"n"],[41,23,32,21],[41,25,32,23],[41,27,32,25,"i"],[41,28,32,26],[41,30,32,28],[42,8,33,6,"d"],[42,9,33,7],[42,12,33,10,"data"],[42,16,33,14],[42,17,33,15,"i"],[42,18,33,16],[42,19,33,17],[42,21,33,19,"node"],[42,25,33,23],[42,28,33,26,"nodes"],[42,33,33,31],[42,34,33,32,"i"],[42,35,33,33],[42,36,33,34],[42,39,33,37],[42,43,33,41,"Node"],[42,60,33,45],[42,61,33,45,"Node"],[42,65,33,45],[42,66,33,46,"d"],[42,67,33,47],[42,68,33,48],[43,8,34,6],[43,12,34,10],[43,13,34,11,"nodeId"],[43,19,34,17],[43,22,34,20,"id"],[43,24,34,22],[43,25,34,23,"d"],[43,26,34,24],[43,28,34,26,"i"],[43,29,34,27],[43,31,34,29,"data"],[43,35,34,33],[43,36,34,34],[43,41,34,39],[43,45,34,43],[43,50,34,48,"nodeId"],[43,56,34,54],[43,60,34,58],[43,62,34,60],[43,63,34,61],[43,65,34,63],[44,10,35,8,"nodeKey"],[44,17,35,15],[44,20,35,18,"keyPrefix"],[44,29,35,27],[44,33,35,31,"node"],[44,37,35,35],[44,38,35,36,"id"],[44,40,35,38],[44,43,35,41,"nodeId"],[44,49,35,47],[44,50,35,48],[45,10,36,8,"nodeByKey"],[45,19,36,17],[45,20,36,18,"nodeKey"],[45,27,36,25],[45,28,36,26],[45,31,36,29,"nodeKey"],[45,38,36,36],[45,42,36,40,"nodeByKey"],[45,51,36,49],[45,54,36,52,"ambiguous"],[45,63,36,61],[45,66,36,64,"node"],[45,70,36,68],[46,8,37,6],[47,6,38,4],[48,6,40,4],[48,11,40,9,"i"],[48,12,40,10],[48,15,40,13],[48,16,40,14],[48,18,40,16,"i"],[48,19,40,17],[48,22,40,20,"n"],[48,23,40,21],[48,25,40,23],[48,27,40,25,"i"],[48,28,40,26],[48,30,40,28],[49,8,41,6,"node"],[49,12,41,10],[49,15,41,13,"nodes"],[49,20,41,18],[49,21,41,19,"i"],[49,22,41,20],[49,23,41,21],[49,25,41,23,"nodeId"],[49,31,41,29],[49,34,41,32,"parentId"],[49,42,41,40],[49,43,41,41,"data"],[49,47,41,45],[49,48,41,46,"i"],[49,49,41,47],[49,50,41,48],[49,52,41,50,"i"],[49,53,41,51],[49,55,41,53,"data"],[49,59,41,57],[49,60,41,58],[50,8,42,6],[50,12,42,10,"nodeId"],[50,18,42,16],[50,22,42,20],[50,26,42,24],[50,30,42,28],[50,32,42,30,"nodeId"],[50,38,42,36],[50,42,42,40],[50,44,42,42],[50,45,42,43],[50,47,42,45],[51,10,43,8],[51,14,43,12,"root"],[51,18,43,16],[51,20,43,18],[51,26,43,24],[51,30,43,28,"Error"],[51,35,43,33],[51,36,43,34],[51,52,43,50],[51,53,43,51],[52,10,44,8,"root"],[52,14,44,12],[52,17,44,15,"node"],[52,21,44,19],[53,8,45,6],[53,9,45,7],[53,15,45,13],[54,10,46,8,"parent"],[54,16,46,14],[54,19,46,17,"nodeByKey"],[54,28,46,26],[54,29,46,27,"keyPrefix"],[54,38,46,36],[54,41,46,39,"nodeId"],[54,47,46,45],[54,48,46,46],[55,10,47,8],[55,14,47,12],[55,15,47,13,"parent"],[55,21,47,19],[55,23,47,21],[55,29,47,27],[55,33,47,31,"Error"],[55,38,47,36],[55,39,47,37],[55,50,47,48],[55,53,47,51,"nodeId"],[55,59,47,57],[55,60,47,58],[56,10,48,8],[56,14,48,12,"parent"],[56,20,48,18],[56,25,48,23,"ambiguous"],[56,34,48,32],[56,36,48,34],[56,42,48,40],[56,46,48,44,"Error"],[56,51,48,49],[56,52,48,50],[56,65,48,63],[56,68,48,66,"nodeId"],[56,74,48,72],[56,75,48,73],[57,10,49,8],[57,14,49,12,"parent"],[57,20,49,18],[57,21,49,19,"children"],[57,29,49,27],[57,31,49,29,"parent"],[57,37,49,35],[57,38,49,36,"children"],[57,46,49,44],[57,47,49,45,"push"],[57,51,49,49],[57,52,49,50,"node"],[57,56,49,54],[57,57,49,55],[57,58,49,56],[57,63,50,13,"parent"],[57,69,50,19],[57,70,50,20,"children"],[57,78,50,28],[57,81,50,31],[57,82,50,32,"node"],[57,86,50,36],[57,87,50,37],[58,10,51,8,"node"],[58,14,51,12],[58,15,51,13,"parent"],[58,21,51,19],[58,24,51,22,"parent"],[58,30,51,28],[59,8,52,6],[60,6,53,4],[61,6,55,4],[61,10,55,8],[61,11,55,9,"root"],[61,15,55,13],[61,17,55,15],[61,23,55,21],[61,27,55,25,"Error"],[61,32,55,30],[61,33,55,31],[61,42,55,40],[61,43,55,41],[62,6,56,4,"root"],[62,10,56,8],[62,11,56,9,"parent"],[62,17,56,15],[62,20,56,18,"preroot"],[62,27,56,25],[63,6,57,4,"root"],[63,10,57,8],[63,11,57,9,"eachBefore"],[63,21,57,19],[63,22,57,20],[63,32,57,29,"node"],[63,36,57,33],[63,38,57,35],[64,8,57,37,"node"],[64,12,57,41],[64,13,57,42,"depth"],[64,18,57,47],[64,21,57,50,"node"],[64,25,57,54],[64,26,57,55,"parent"],[64,32,57,61],[64,33,57,62,"depth"],[64,38,57,67],[64,41,57,70],[64,42,57,71],[65,8,57,73],[65,10,57,75,"n"],[65,11,57,76],[66,6,57,78],[66,7,57,79],[66,8,57,80],[66,9,57,81,"eachBefore"],[66,19,57,91],[66,20,57,92,"computeHeight"],[66,37,57,105],[66,38,57,105,"computeHeight"],[66,51,57,105],[66,52,57,106],[67,6,58,4,"root"],[67,10,58,8],[67,11,58,9,"parent"],[67,17,58,15],[67,20,58,18],[67,24,58,22],[68,6,59,4],[68,10,59,8,"n"],[68,11,59,9],[68,14,59,12],[68,15,59,13],[68,17,59,15],[68,23,59,21],[68,27,59,25,"Error"],[68,32,59,30],[68,33,59,31],[68,40,59,38],[68,41,59,39],[69,6,61,4],[69,13,61,11,"root"],[69,17,61,15],[70,4,62,2],[71,4,64,2,"stratify"],[71,12,64,10],[71,13,64,11,"id"],[71,15,64,13],[71,18,64,16],[71,28,64,25,"x"],[71,29,64,26],[71,31,64,28],[72,6,65,4],[72,13,65,11,"arguments"],[72,22,65,20],[72,23,65,21,"length"],[72,29,65,27],[72,33,65,31,"id"],[72,35,65,33],[72,38,65,36],[72,42,65,36,"required"],[72,54,65,44],[72,55,65,44,"required"],[72,63,65,44],[72,65,65,45,"x"],[72,66,65,46],[72,67,65,47],[72,69,65,49,"stratify"],[72,77,65,57],[72,81,65,61,"id"],[72,83,65,63],[73,4,66,2],[73,5,66,3],[74,4,68,2,"stratify"],[74,12,68,10],[74,13,68,11,"parentId"],[74,21,68,19],[74,24,68,22],[74,34,68,31,"x"],[74,35,68,32],[74,37,68,34],[75,6,69,4],[75,13,69,11,"arguments"],[75,22,69,20],[75,23,69,21,"length"],[75,29,69,27],[75,33,69,31,"parentId"],[75,41,69,39],[75,44,69,42],[75,48,69,42,"required"],[75,60,69,50],[75,61,69,50,"required"],[75,69,69,50],[75,71,69,51,"x"],[75,72,69,52],[75,73,69,53],[75,75,69,55,"stratify"],[75,83,69,63],[75,87,69,67,"parentId"],[75,95,69,75],[76,4,70,2],[76,5,70,3],[77,4,72,2],[77,11,72,9,"stratify"],[77,19,72,17],[78,2,73,0],[79,0,73,1],[79,3]],"functionMap":{"names":["<global>","defaultId","defaultParentId","default","stratify","root.eachBefore$argument_0","id","parentId"],"mappings":"AAA;ACO;CDE;AEE;CFE;eGE;ECI;oBCqC,2DD;GDK;gBGE;GHE;sBIE;GJE;CHG"},"hasCjsExports":false},"type":"js/module"}]}