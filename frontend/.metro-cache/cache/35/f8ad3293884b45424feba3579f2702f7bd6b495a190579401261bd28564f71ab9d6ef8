{"dependencies":[{"name":"./dice.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":36,"index":36}}],"key":"3CHDB1hFtsOiLohKJ7BII/dD7ng=","exportNames":["*"],"imports":1}},{"name":"./slice.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":37},"end":{"line":2,"column":38,"index":75}}],"key":"zspABK3wSicr4bv5AbutMpwyfig=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"phi\", {\n    enumerable: true,\n    get: function () {\n      return phi;\n    }\n  });\n  exports.squarifyRatio = squarifyRatio;\n  var _diceJs = require(_dependencyMap[0], \"./dice.js\");\n  var treemapDice = _interopDefault(_diceJs);\n  var _sliceJs = require(_dependencyMap[1], \"./slice.js\");\n  var treemapSlice = _interopDefault(_sliceJs);\n  var phi = (1 + Math.sqrt(5)) / 2;\n  function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n    var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx,\n      dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n    while (i0 < n) {\n      dx = x1 - x0, dy = y1 - y0;\n\n      // Find the next non-empty node.\n      do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n      minValue = maxValue = sumValue;\n      alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n      beta = sumValue * sumValue * alpha;\n      minRatio = Math.max(maxValue / beta, beta / minValue);\n\n      // Keep adding nodes while the aspect ratio maintains or improves.\n      for (; i1 < n; ++i1) {\n        sumValue += nodeValue = nodes[i1].value;\n        if (nodeValue < minValue) minValue = nodeValue;\n        if (nodeValue > maxValue) maxValue = nodeValue;\n        beta = sumValue * sumValue * alpha;\n        newRatio = Math.max(maxValue / beta, beta / minValue);\n        if (newRatio > minRatio) {\n          sumValue -= nodeValue;\n          break;\n        }\n        minRatio = newRatio;\n      }\n\n      // Position and record the row orientation.\n      rows.push(row = {\n        value: sumValue,\n        dice: dx < dy,\n        children: nodes.slice(i0, i1)\n      });\n      if (row.dice) (0, treemapDice.default)(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);else (0, treemapSlice.default)(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n      value -= sumValue, i0 = i1;\n    }\n    return rows;\n  }\n  var _default = function custom(ratio) {\n    function squarify(parent, x0, y0, x1, y1) {\n      squarifyRatio(ratio, parent, x0, y0, x1, y1);\n    }\n    squarify.ratio = function (x) {\n      return custom((x = +x) > 1 ? x : 1);\n    };\n    return squarify;\n  }(phi);\n});","lineCount":92,"map":[[12,2,55,0,"Object"],[12,8,55,0],[12,9,55,0,"defineProperty"],[12,23,55,0],[12,24,55,0,"exports"],[12,31,55,0],[13,4,55,0,"enumerable"],[13,14,55,0],[14,4,55,0,"get"],[14,7,55,0],[14,18,55,0,"get"],[14,19,55,0],[15,6,55,0],[15,13,55,0,"_default"],[15,21,55,0],[16,4,55,0],[17,2,55,0],[18,2,4,0,"Object"],[18,8,4,0],[18,9,4,0,"defineProperty"],[18,23,4,0],[18,24,4,0,"exports"],[18,31,4,0],[19,4,4,0,"enumerable"],[19,14,4,0],[20,4,4,0,"get"],[20,7,4,0],[20,18,4,0,"get"],[20,19,4,0],[21,6,4,0],[21,13,4,0,"phi"],[21,16,4,0],[22,4,4,0],[23,2,4,0],[24,2,6,0,"exports"],[24,9,6,0],[24,10,6,0,"squarifyRatio"],[24,23,6,0],[24,26,6,0,"squarifyRatio"],[24,39,6,0],[25,2,1,0],[25,6,1,0,"_diceJs"],[25,13,1,0],[25,16,1,0,"require"],[25,23,1,0],[25,24,1,0,"_dependencyMap"],[25,38,1,0],[26,2,1,0],[26,6,1,0,"treemapDice"],[26,17,1,0],[26,20,1,0,"_interopDefault"],[26,35,1,0],[26,36,1,0,"_diceJs"],[26,43,1,0],[27,2,2,0],[27,6,2,0,"_sliceJs"],[27,14,2,0],[27,17,2,0,"require"],[27,24,2,0],[27,25,2,0,"_dependencyMap"],[27,39,2,0],[28,2,2,0],[28,6,2,0,"treemapSlice"],[28,18,2,0],[28,21,2,0,"_interopDefault"],[28,36,2,0],[28,37,2,0,"_sliceJs"],[28,45,2,0],[29,2,4,7],[29,6,4,11,"phi"],[29,9,4,14],[29,12,4,17],[29,13,4,18],[29,14,4,19],[29,17,4,22,"Math"],[29,21,4,26],[29,22,4,27,"sqrt"],[29,26,4,31],[29,27,4,32],[29,28,4,33],[29,29,4,34],[29,33,4,38],[29,34,4,39],[30,2,6,7],[30,11,6,16,"squarifyRatio"],[30,24,6,29,"squarifyRatio"],[30,25,6,30,"ratio"],[30,30,6,35],[30,32,6,37,"parent"],[30,38,6,43],[30,40,6,45,"x0"],[30,42,6,47],[30,44,6,49,"y0"],[30,46,6,51],[30,48,6,53,"x1"],[30,50,6,55],[30,52,6,57,"y1"],[30,54,6,59],[30,56,6,61],[31,4,7,2],[31,8,7,6,"rows"],[31,12,7,10],[31,15,7,13],[31,17,7,15],[32,6,8,6,"nodes"],[32,11,8,11],[32,14,8,14,"parent"],[32,20,8,20],[32,21,8,21,"children"],[32,29,8,29],[33,6,9,6,"row"],[33,9,9,9],[34,6,10,6,"nodeValue"],[34,15,10,15],[35,6,11,6,"i0"],[35,8,11,8],[35,11,11,11],[35,12,11,12],[36,6,12,6,"i1"],[36,8,12,8],[36,11,12,11],[36,12,12,12],[37,6,13,6,"n"],[37,7,13,7],[37,10,13,10,"nodes"],[37,15,13,15],[37,16,13,16,"length"],[37,22,13,22],[38,6,14,6,"dx"],[38,8,14,8],[39,6,14,10,"dy"],[39,8,14,12],[40,6,15,6,"value"],[40,11,15,11],[40,14,15,14,"parent"],[40,20,15,20],[40,21,15,21,"value"],[40,26,15,26],[41,6,16,6,"sumValue"],[41,14,16,14],[42,6,17,6,"minValue"],[42,14,17,14],[43,6,18,6,"maxValue"],[43,14,18,14],[44,6,19,6,"newRatio"],[44,14,19,14],[45,6,20,6,"minRatio"],[45,14,20,14],[46,6,21,6,"alpha"],[46,11,21,11],[47,6,22,6,"beta"],[47,10,22,10],[48,4,24,2],[48,11,24,9,"i0"],[48,13,24,11],[48,16,24,14,"n"],[48,17,24,15],[48,19,24,17],[49,6,25,4,"dx"],[49,8,25,6],[49,11,25,9,"x1"],[49,13,25,11],[49,16,25,14,"x0"],[49,18,25,16],[49,20,25,18,"dy"],[49,22,25,20],[49,25,25,23,"y1"],[49,27,25,25],[49,30,25,28,"y0"],[49,32,25,30],[51,6,27,4],[52,6,28,4],[52,9,28,7,"sumValue"],[52,17,28,15],[52,20,28,18,"nodes"],[52,25,28,23],[52,26,28,24,"i1"],[52,28,28,26],[52,30,28,28],[52,31,28,29],[52,32,28,30,"value"],[52,37,28,35],[52,38,28,36],[52,46,28,44],[52,47,28,45,"sumValue"],[52,55,28,53],[52,59,28,57,"i1"],[52,61,28,59],[52,64,28,62,"n"],[52,65,28,63],[53,6,29,4,"minValue"],[53,14,29,12],[53,17,29,15,"maxValue"],[53,25,29,23],[53,28,29,26,"sumValue"],[53,36,29,34],[54,6,30,4,"alpha"],[54,11,30,9],[54,14,30,12,"Math"],[54,18,30,16],[54,19,30,17,"max"],[54,22,30,20],[54,23,30,21,"dy"],[54,25,30,23],[54,28,30,26,"dx"],[54,30,30,28],[54,32,30,30,"dx"],[54,34,30,32],[54,37,30,35,"dy"],[54,39,30,37],[54,40,30,38],[54,44,30,42,"value"],[54,49,30,47],[54,52,30,50,"ratio"],[54,57,30,55],[54,58,30,56],[55,6,31,4,"beta"],[55,10,31,8],[55,13,31,11,"sumValue"],[55,21,31,19],[55,24,31,22,"sumValue"],[55,32,31,30],[55,35,31,33,"alpha"],[55,40,31,38],[56,6,32,4,"minRatio"],[56,14,32,12],[56,17,32,15,"Math"],[56,21,32,19],[56,22,32,20,"max"],[56,25,32,23],[56,26,32,24,"maxValue"],[56,34,32,32],[56,37,32,35,"beta"],[56,41,32,39],[56,43,32,41,"beta"],[56,47,32,45],[56,50,32,48,"minValue"],[56,58,32,56],[56,59,32,57],[58,6,34,4],[59,6,35,4],[59,13,35,11,"i1"],[59,15,35,13],[59,18,35,16,"n"],[59,19,35,17],[59,21,35,19],[59,23,35,21,"i1"],[59,25,35,23],[59,27,35,25],[60,8,36,6,"sumValue"],[60,16,36,14],[60,20,36,18,"nodeValue"],[60,29,36,27],[60,32,36,30,"nodes"],[60,37,36,35],[60,38,36,36,"i1"],[60,40,36,38],[60,41,36,39],[60,42,36,40,"value"],[60,47,36,45],[61,8,37,6],[61,12,37,10,"nodeValue"],[61,21,37,19],[61,24,37,22,"minValue"],[61,32,37,30],[61,34,37,32,"minValue"],[61,42,37,40],[61,45,37,43,"nodeValue"],[61,54,37,52],[62,8,38,6],[62,12,38,10,"nodeValue"],[62,21,38,19],[62,24,38,22,"maxValue"],[62,32,38,30],[62,34,38,32,"maxValue"],[62,42,38,40],[62,45,38,43,"nodeValue"],[62,54,38,52],[63,8,39,6,"beta"],[63,12,39,10],[63,15,39,13,"sumValue"],[63,23,39,21],[63,26,39,24,"sumValue"],[63,34,39,32],[63,37,39,35,"alpha"],[63,42,39,40],[64,8,40,6,"newRatio"],[64,16,40,14],[64,19,40,17,"Math"],[64,23,40,21],[64,24,40,22,"max"],[64,27,40,25],[64,28,40,26,"maxValue"],[64,36,40,34],[64,39,40,37,"beta"],[64,43,40,41],[64,45,40,43,"beta"],[64,49,40,47],[64,52,40,50,"minValue"],[64,60,40,58],[64,61,40,59],[65,8,41,6],[65,12,41,10,"newRatio"],[65,20,41,18],[65,23,41,21,"minRatio"],[65,31,41,29],[65,33,41,31],[66,10,41,33,"sumValue"],[66,18,41,41],[66,22,41,45,"nodeValue"],[66,31,41,54],[67,10,41,56],[68,8,41,63],[69,8,42,6,"minRatio"],[69,16,42,14],[69,19,42,17,"newRatio"],[69,27,42,25],[70,6,43,4],[72,6,45,4],[73,6,46,4,"rows"],[73,10,46,8],[73,11,46,9,"push"],[73,15,46,13],[73,16,46,14,"row"],[73,19,46,17],[73,22,46,20],[74,8,46,21,"value"],[74,13,46,26],[74,15,46,28,"sumValue"],[74,23,46,36],[75,8,46,38,"dice"],[75,12,46,42],[75,14,46,44,"dx"],[75,16,46,46],[75,19,46,49,"dy"],[75,21,46,51],[76,8,46,53,"children"],[76,16,46,61],[76,18,46,63,"nodes"],[76,23,46,68],[76,24,46,69,"slice"],[76,29,46,74],[76,30,46,75,"i0"],[76,32,46,77],[76,34,46,79,"i1"],[76,36,46,81],[77,6,46,82],[77,7,46,83],[77,8,46,84],[78,6,47,4],[78,10,47,8,"row"],[78,13,47,11],[78,14,47,12,"dice"],[78,18,47,16],[78,20,47,18],[78,24,47,18,"treemapDice"],[78,35,47,29],[78,36,47,29,"default"],[78,43,47,29],[78,45,47,30,"row"],[78,48,47,33],[78,50,47,35,"x0"],[78,52,47,37],[78,54,47,39,"y0"],[78,56,47,41],[78,58,47,43,"x1"],[78,60,47,45],[78,62,47,47,"value"],[78,67,47,52],[78,70,47,55,"y0"],[78,72,47,57],[78,76,47,61,"dy"],[78,78,47,63],[78,81,47,66,"sumValue"],[78,89,47,74],[78,92,47,77,"value"],[78,97,47,82],[78,100,47,85,"y1"],[78,102,47,87],[78,103,47,88],[78,104,47,89],[78,109,48,9],[78,113,48,9,"treemapSlice"],[78,125,48,21],[78,126,48,21,"default"],[78,133,48,21],[78,135,48,22,"row"],[78,138,48,25],[78,140,48,27,"x0"],[78,142,48,29],[78,144,48,31,"y0"],[78,146,48,33],[78,148,48,35,"value"],[78,153,48,40],[78,156,48,43,"x0"],[78,158,48,45],[78,162,48,49,"dx"],[78,164,48,51],[78,167,48,54,"sumValue"],[78,175,48,62],[78,178,48,65,"value"],[78,183,48,70],[78,186,48,73,"x1"],[78,188,48,75],[78,190,48,77,"y1"],[78,192,48,79],[78,193,48,80],[79,6,49,4,"value"],[79,11,49,9],[79,15,49,13,"sumValue"],[79,23,49,21],[79,25,49,23,"i0"],[79,27,49,25],[79,30,49,28,"i1"],[79,32,49,30],[80,4,50,2],[81,4,52,2],[81,11,52,9,"rows"],[81,15,52,13],[82,2,53,0],[83,2,55,0],[83,6,55,0,"_default"],[83,14,55,0],[83,17,55,16],[83,26,55,25,"custom"],[83,32,55,31,"custom"],[83,33,55,32,"ratio"],[83,38,55,37],[83,40,55,39],[84,4,57,2],[84,13,57,11,"squarify"],[84,21,57,19,"squarify"],[84,22,57,20,"parent"],[84,28,57,26],[84,30,57,28,"x0"],[84,32,57,30],[84,34,57,32,"y0"],[84,36,57,34],[84,38,57,36,"x1"],[84,40,57,38],[84,42,57,40,"y1"],[84,44,57,42],[84,46,57,44],[85,6,58,4,"squarifyRatio"],[85,19,58,17],[85,20,58,18,"ratio"],[85,25,58,23],[85,27,58,25,"parent"],[85,33,58,31],[85,35,58,33,"x0"],[85,37,58,35],[85,39,58,37,"y0"],[85,41,58,39],[85,43,58,41,"x1"],[85,45,58,43],[85,47,58,45,"y1"],[85,49,58,47],[85,50,58,48],[86,4,59,2],[87,4,61,2,"squarify"],[87,12,61,10],[87,13,61,11,"ratio"],[87,18,61,16],[87,21,61,19],[87,31,61,28,"x"],[87,32,61,29],[87,34,61,31],[88,6,62,4],[88,13,62,11,"custom"],[88,19,62,17],[88,20,62,18],[88,21,62,19,"x"],[88,22,62,20],[88,25,62,23],[88,26,62,24,"x"],[88,27,62,25],[88,31,62,29],[88,32,62,30],[88,35,62,33,"x"],[88,36,62,34],[88,39,62,37],[88,40,62,38],[88,41,62,39],[89,4,63,2],[89,5,63,3],[90,4,65,2],[90,11,65,9,"squarify"],[90,19,65,17],[91,2,66,0],[91,3,66,1],[91,4,66,3,"phi"],[91,7,66,6],[91,8,66,7],[92,0,66,8],[92,3]],"functionMap":{"names":["<global>","squarifyRatio","custom","squarify","ratio"],"mappings":"AAA;OCK;CD+C;gBEE;ECE;GDE;mBEE;GFE;CFG"},"hasCjsExports":false},"type":"js/module"}]}