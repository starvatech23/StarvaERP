{"dependencies":[{"name":"d3-array","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"6/g0OmizGembrwGL3ynTnrgY1Es=","exportNames":["*"],"imports":1}},{"name":"./math","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":32,"index":64}}],"key":"QDoyAKlwWcg2sH6Ywnm1C3X+Y7o=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _ref;\n    }\n  });\n  var _d3Array = require(_dependencyMap[0], \"d3-array\");\n  var _math = require(_dependencyMap[1], \"./math\");\n  function compareValue(compare) {\n    return function (a, b) {\n      return compare(a.source.value + a.target.value, b.source.value + b.target.value);\n    };\n  }\n  function _ref() {\n    var padAngle = 0,\n      sortGroups = null,\n      sortSubgroups = null,\n      sortChords = null;\n    function chord(matrix) {\n      var n = matrix.length,\n        groupSums = [],\n        groupIndex = (0, _d3Array.range)(n),\n        subgroupIndex = [],\n        chords = [],\n        groups = chords.groups = new Array(n),\n        subgroups = new Array(n * n),\n        k,\n        x,\n        x0,\n        dx,\n        i,\n        j;\n\n      // Compute the sum.\n      k = 0, i = -1;\n      while (++i < n) {\n        x = 0, j = -1;\n        while (++j < n) {\n          x += matrix[i][j];\n        }\n        groupSums.push(x);\n        subgroupIndex.push((0, _d3Array.range)(n));\n        k += x;\n      }\n\n      // Sort groups…\n      if (sortGroups) groupIndex.sort(function (a, b) {\n        return sortGroups(groupSums[a], groupSums[b]);\n      });\n\n      // Sort subgroups…\n      if (sortSubgroups) subgroupIndex.forEach(function (d, i) {\n        d.sort(function (a, b) {\n          return sortSubgroups(matrix[i][a], matrix[i][b]);\n        });\n      });\n\n      // Convert the sum to scaling factor for [0, 2pi].\n      // TODO Allow start and end angle to be specified?\n      // TODO Allow padding to be specified as percentage?\n      k = (0, _math.max)(0, _math.tau - padAngle * n) / k;\n      dx = k ? padAngle : _math.tau / n;\n\n      // Compute the start and end angle for each group and subgroup.\n      // Note: Opera has a bug reordering object literal properties!\n      x = 0, i = -1;\n      while (++i < n) {\n        x0 = x, j = -1;\n        while (++j < n) {\n          var di = groupIndex[i],\n            dj = subgroupIndex[di][j],\n            v = matrix[di][dj],\n            a0 = x,\n            a1 = x += v * k;\n          subgroups[dj * n + di] = {\n            index: di,\n            subindex: dj,\n            startAngle: a0,\n            endAngle: a1,\n            value: v\n          };\n        }\n        groups[di] = {\n          index: di,\n          startAngle: x0,\n          endAngle: x,\n          value: groupSums[di]\n        };\n        x += dx;\n      }\n\n      // Generate chords for each (non-empty) subgroup-subgroup link.\n      i = -1;\n      while (++i < n) {\n        j = i - 1;\n        while (++j < n) {\n          var source = subgroups[j * n + i],\n            target = subgroups[i * n + j];\n          if (source.value || target.value) {\n            chords.push(source.value < target.value ? {\n              source: target,\n              target: source\n            } : {\n              source: source,\n              target: target\n            });\n          }\n        }\n      }\n      return sortChords ? chords.sort(sortChords) : chords;\n    }\n    chord.padAngle = function (_) {\n      return arguments.length ? (padAngle = (0, _math.max)(0, _), chord) : padAngle;\n    };\n    chord.sortGroups = function (_) {\n      return arguments.length ? (sortGroups = _, chord) : sortGroups;\n    };\n    chord.sortSubgroups = function (_) {\n      return arguments.length ? (sortSubgroups = _, chord) : sortSubgroups;\n    };\n    chord.sortChords = function (_) {\n      return arguments.length ? (_ == null ? sortChords = null : (sortChords = compareValue(_))._ = _, chord) : sortChords && sortChords._;\n    };\n    return chord;\n  }\n});","lineCount":132,"map":[[7,2,13,15,"Object"],[7,8,13,15],[7,9,13,15,"defineProperty"],[7,23,13,15],[7,24,13,15,"exports"],[7,31,13,15],[8,4,13,15,"enumerable"],[8,14,13,15],[9,4,13,15,"get"],[9,7,13,15],[9,18,13,15,"get"],[9,19,13,15],[10,6,13,15],[10,13,13,15,"_ref"],[10,17,13,15],[11,4,13,15],[12,2,13,15],[13,2,1,0],[13,6,1,0,"_d3Array"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,2,0],[14,6,2,0,"_math"],[14,11,2,0],[14,14,2,0,"require"],[14,21,2,0],[14,22,2,0,"_dependencyMap"],[14,36,2,0],[15,2,4,0],[15,11,4,9,"compareValue"],[15,23,4,21,"compareValue"],[15,24,4,22,"compare"],[15,31,4,29],[15,33,4,31],[16,4,5,2],[16,11,5,9],[16,21,5,18,"a"],[16,22,5,19],[16,24,5,21,"b"],[16,25,5,22],[16,27,5,24],[17,6,6,4],[17,13,6,11,"compare"],[17,20,6,18],[17,21,7,6,"a"],[17,22,7,7],[17,23,7,8,"source"],[17,29,7,14],[17,30,7,15,"value"],[17,35,7,20],[17,38,7,23,"a"],[17,39,7,24],[17,40,7,25,"target"],[17,46,7,31],[17,47,7,32,"value"],[17,52,7,37],[17,54,8,6,"b"],[17,55,8,7],[17,56,8,8,"source"],[17,62,8,14],[17,63,8,15,"value"],[17,68,8,20],[17,71,8,23,"b"],[17,72,8,24],[17,73,8,25,"target"],[17,79,8,31],[17,80,8,32,"value"],[17,85,9,4],[17,86,9,5],[18,4,10,2],[18,5,10,3],[19,2,11,0],[20,2,13,15],[20,11,13,15,"_ref"],[20,16,13,15],[20,18,13,26],[21,4,14,2],[21,8,14,6,"padAngle"],[21,16,14,14],[21,19,14,17],[21,20,14,18],[22,6,15,6,"sortGroups"],[22,16,15,16],[22,19,15,19],[22,23,15,23],[23,6,16,6,"sortSubgroups"],[23,19,16,19],[23,22,16,22],[23,26,16,26],[24,6,17,6,"sortChords"],[24,16,17,16],[24,19,17,19],[24,23,17,23],[25,4,19,2],[25,13,19,11,"chord"],[25,18,19,16,"chord"],[25,19,19,17,"matrix"],[25,25,19,23],[25,27,19,25],[26,6,20,4],[26,10,20,8,"n"],[26,11,20,9],[26,14,20,12,"matrix"],[26,20,20,18],[26,21,20,19,"length"],[26,27,20,25],[27,8,21,8,"groupSums"],[27,17,21,17],[27,20,21,20],[27,22,21,22],[28,8,22,8,"groupIndex"],[28,18,22,18],[28,21,22,21],[28,25,22,21,"range"],[28,33,22,26],[28,34,22,26,"range"],[28,39,22,26],[28,41,22,27,"n"],[28,42,22,28],[28,43,22,29],[29,8,23,8,"subgroupIndex"],[29,21,23,21],[29,24,23,24],[29,26,23,26],[30,8,24,8,"chords"],[30,14,24,14],[30,17,24,17],[30,19,24,19],[31,8,25,8,"groups"],[31,14,25,14],[31,17,25,17,"chords"],[31,23,25,23],[31,24,25,24,"groups"],[31,30,25,30],[31,33,25,33],[31,37,25,37,"Array"],[31,42,25,42],[31,43,25,43,"n"],[31,44,25,44],[31,45,25,45],[32,8,26,8,"subgroups"],[32,17,26,17],[32,20,26,20],[32,24,26,24,"Array"],[32,29,26,29],[32,30,26,30,"n"],[32,31,26,31],[32,34,26,34,"n"],[32,35,26,35],[32,36,26,36],[33,8,27,8,"k"],[33,9,27,9],[34,8,28,8,"x"],[34,9,28,9],[35,8,29,8,"x0"],[35,10,29,10],[36,8,30,8,"dx"],[36,10,30,10],[37,8,31,8,"i"],[37,9,31,9],[38,8,32,8,"j"],[38,9,32,9],[40,6,34,4],[41,6,35,4,"k"],[41,7,35,5],[41,10,35,8],[41,11,35,9],[41,13,35,11,"i"],[41,14,35,12],[41,17,35,15],[41,18,35,16],[41,19,35,17],[42,6,35,19],[42,13,35,26],[42,15,35,28,"i"],[42,16,35,29],[42,19,35,32,"n"],[42,20,35,33],[42,22,35,35],[43,8,36,6,"x"],[43,9,36,7],[43,12,36,10],[43,13,36,11],[43,15,36,13,"j"],[43,16,36,14],[43,19,36,17],[43,20,36,18],[43,21,36,19],[44,8,36,21],[44,15,36,28],[44,17,36,30,"j"],[44,18,36,31],[44,21,36,34,"n"],[44,22,36,35],[44,24,36,37],[45,10,37,8,"x"],[45,11,37,9],[45,15,37,13,"matrix"],[45,21,37,19],[45,22,37,20,"i"],[45,23,37,21],[45,24,37,22],[45,25,37,23,"j"],[45,26,37,24],[45,27,37,25],[46,8,38,6],[47,8,39,6,"groupSums"],[47,17,39,15],[47,18,39,16,"push"],[47,22,39,20],[47,23,39,21,"x"],[47,24,39,22],[47,25,39,23],[48,8,40,6,"subgroupIndex"],[48,21,40,19],[48,22,40,20,"push"],[48,26,40,24],[48,27,40,25],[48,31,40,25,"range"],[48,39,40,30],[48,40,40,30,"range"],[48,45,40,30],[48,47,40,31,"n"],[48,48,40,32],[48,49,40,33],[48,50,40,34],[49,8,41,6,"k"],[49,9,41,7],[49,13,41,11,"x"],[49,14,41,12],[50,6,42,4],[52,6,44,4],[53,6,45,4],[53,10,45,8,"sortGroups"],[53,20,45,18],[53,22,45,20,"groupIndex"],[53,32,45,30],[53,33,45,31,"sort"],[53,37,45,35],[53,38,45,36],[53,48,45,45,"a"],[53,49,45,46],[53,51,45,48,"b"],[53,52,45,49],[53,54,45,51],[54,8,46,6],[54,15,46,13,"sortGroups"],[54,25,46,23],[54,26,46,24,"groupSums"],[54,35,46,33],[54,36,46,34,"a"],[54,37,46,35],[54,38,46,36],[54,40,46,38,"groupSums"],[54,49,46,47],[54,50,46,48,"b"],[54,51,46,49],[54,52,46,50],[54,53,46,51],[55,6,47,4],[55,7,47,5],[55,8,47,6],[57,6,49,4],[58,6,50,4],[58,10,50,8,"sortSubgroups"],[58,23,50,21],[58,25,50,23,"subgroupIndex"],[58,38,50,36],[58,39,50,37,"forEach"],[58,46,50,44],[58,47,50,45],[58,57,50,54,"d"],[58,58,50,55],[58,60,50,57,"i"],[58,61,50,58],[58,63,50,60],[59,8,51,6,"d"],[59,9,51,7],[59,10,51,8,"sort"],[59,14,51,12],[59,15,51,13],[59,25,51,22,"a"],[59,26,51,23],[59,28,51,25,"b"],[59,29,51,26],[59,31,51,28],[60,10,52,8],[60,17,52,15,"sortSubgroups"],[60,30,52,28],[60,31,52,29,"matrix"],[60,37,52,35],[60,38,52,36,"i"],[60,39,52,37],[60,40,52,38],[60,41,52,39,"a"],[60,42,52,40],[60,43,52,41],[60,45,52,43,"matrix"],[60,51,52,49],[60,52,52,50,"i"],[60,53,52,51],[60,54,52,52],[60,55,52,53,"b"],[60,56,52,54],[60,57,52,55],[60,58,52,56],[61,8,53,6],[61,9,53,7],[61,10,53,8],[62,6,54,4],[62,7,54,5],[62,8,54,6],[64,6,56,4],[65,6,57,4],[66,6,58,4],[67,6,59,4,"k"],[67,7,59,5],[67,10,59,8],[67,14,59,8,"max"],[67,19,59,11],[67,20,59,11,"max"],[67,23,59,11],[67,25,59,12],[67,26,59,13],[67,28,59,15,"tau"],[67,33,59,18],[67,34,59,18,"tau"],[67,37,59,18],[67,40,59,21,"padAngle"],[67,48,59,29],[67,51,59,32,"n"],[67,52,59,33],[67,53,59,34],[67,56,59,37,"k"],[67,57,59,38],[68,6,60,4,"dx"],[68,8,60,6],[68,11,60,9,"k"],[68,12,60,10],[68,15,60,13,"padAngle"],[68,23,60,21],[68,26,60,24,"tau"],[68,31,60,27],[68,32,60,27,"tau"],[68,35,60,27],[68,38,60,30,"n"],[68,39,60,31],[70,6,62,4],[71,6,63,4],[72,6,64,4,"x"],[72,7,64,5],[72,10,64,8],[72,11,64,9],[72,13,64,11,"i"],[72,14,64,12],[72,17,64,15],[72,18,64,16],[72,19,64,17],[73,6,64,19],[73,13,64,26],[73,15,64,28,"i"],[73,16,64,29],[73,19,64,32,"n"],[73,20,64,33],[73,22,64,35],[74,8,65,6,"x0"],[74,10,65,8],[74,13,65,11,"x"],[74,14,65,12],[74,16,65,14,"j"],[74,17,65,15],[74,20,65,18],[74,21,65,19],[74,22,65,20],[75,8,65,22],[75,15,65,29],[75,17,65,31,"j"],[75,18,65,32],[75,21,65,35,"n"],[75,22,65,36],[75,24,65,38],[76,10,66,8],[76,14,66,12,"di"],[76,16,66,14],[76,19,66,17,"groupIndex"],[76,29,66,27],[76,30,66,28,"i"],[76,31,66,29],[76,32,66,30],[77,12,67,12,"dj"],[77,14,67,14],[77,17,67,17,"subgroupIndex"],[77,30,67,30],[77,31,67,31,"di"],[77,33,67,33],[77,34,67,34],[77,35,67,35,"j"],[77,36,67,36],[77,37,67,37],[78,12,68,12,"v"],[78,13,68,13],[78,16,68,16,"matrix"],[78,22,68,22],[78,23,68,23,"di"],[78,25,68,25],[78,26,68,26],[78,27,68,27,"dj"],[78,29,68,29],[78,30,68,30],[79,12,69,12,"a0"],[79,14,69,14],[79,17,69,17,"x"],[79,18,69,18],[80,12,70,12,"a1"],[80,14,70,14],[80,17,70,17,"x"],[80,18,70,18],[80,22,70,22,"v"],[80,23,70,23],[80,26,70,26,"k"],[80,27,70,27],[81,10,71,8,"subgroups"],[81,19,71,17],[81,20,71,18,"dj"],[81,22,71,20],[81,25,71,23,"n"],[81,26,71,24],[81,29,71,27,"di"],[81,31,71,29],[81,32,71,30],[81,35,71,33],[82,12,72,10,"index"],[82,17,72,15],[82,19,72,17,"di"],[82,21,72,19],[83,12,73,10,"subindex"],[83,20,73,18],[83,22,73,20,"dj"],[83,24,73,22],[84,12,74,10,"startAngle"],[84,22,74,20],[84,24,74,22,"a0"],[84,26,74,24],[85,12,75,10,"endAngle"],[85,20,75,18],[85,22,75,20,"a1"],[85,24,75,22],[86,12,76,10,"value"],[86,17,76,15],[86,19,76,17,"v"],[87,10,77,8],[87,11,77,9],[88,8,78,6],[89,8,79,6,"groups"],[89,14,79,12],[89,15,79,13,"di"],[89,17,79,15],[89,18,79,16],[89,21,79,19],[90,10,80,8,"index"],[90,15,80,13],[90,17,80,15,"di"],[90,19,80,17],[91,10,81,8,"startAngle"],[91,20,81,18],[91,22,81,20,"x0"],[91,24,81,22],[92,10,82,8,"endAngle"],[92,18,82,16],[92,20,82,18,"x"],[92,21,82,19],[93,10,83,8,"value"],[93,15,83,13],[93,17,83,15,"groupSums"],[93,26,83,24],[93,27,83,25,"di"],[93,29,83,27],[94,8,84,6],[94,9,84,7],[95,8,85,6,"x"],[95,9,85,7],[95,13,85,11,"dx"],[95,15,85,13],[96,6,86,4],[98,6,88,4],[99,6,89,4,"i"],[99,7,89,5],[99,10,89,8],[99,11,89,9],[99,12,89,10],[100,6,89,12],[100,13,89,19],[100,15,89,21,"i"],[100,16,89,22],[100,19,89,25,"n"],[100,20,89,26],[100,22,89,28],[101,8,90,6,"j"],[101,9,90,7],[101,12,90,10,"i"],[101,13,90,11],[101,16,90,14],[101,17,90,15],[102,8,90,17],[102,15,90,24],[102,17,90,26,"j"],[102,18,90,27],[102,21,90,30,"n"],[102,22,90,31],[102,24,90,33],[103,10,91,8],[103,14,91,12,"source"],[103,20,91,18],[103,23,91,21,"subgroups"],[103,32,91,30],[103,33,91,31,"j"],[103,34,91,32],[103,37,91,35,"n"],[103,38,91,36],[103,41,91,39,"i"],[103,42,91,40],[103,43,91,41],[104,12,92,12,"target"],[104,18,92,18],[104,21,92,21,"subgroups"],[104,30,92,30],[104,31,92,31,"i"],[104,32,92,32],[104,35,92,35,"n"],[104,36,92,36],[104,39,92,39,"j"],[104,40,92,40],[104,41,92,41],[105,10,93,8],[105,14,93,12,"source"],[105,20,93,18],[105,21,93,19,"value"],[105,26,93,24],[105,30,93,28,"target"],[105,36,93,34],[105,37,93,35,"value"],[105,42,93,40],[105,44,93,42],[106,12,94,10,"chords"],[106,18,94,16],[106,19,94,17,"push"],[106,23,94,21],[106,24,94,22,"source"],[106,30,94,28],[106,31,94,29,"value"],[106,36,94,34],[106,39,94,37,"target"],[106,45,94,43],[106,46,94,44,"value"],[106,51,94,49],[106,54,95,16],[107,14,95,17,"source"],[107,20,95,23],[107,22,95,25,"target"],[107,28,95,31],[108,14,95,33,"target"],[108,20,95,39],[108,22,95,41,"source"],[109,12,95,47],[109,13,95,48],[109,16,96,16],[110,14,96,17,"source"],[110,20,96,23],[110,22,96,25,"source"],[110,28,96,31],[111,14,96,33,"target"],[111,20,96,39],[111,22,96,41,"target"],[112,12,96,47],[112,13,96,48],[112,14,96,49],[113,10,97,8],[114,8,98,6],[115,6,99,4],[116,6,101,4],[116,13,101,11,"sortChords"],[116,23,101,21],[116,26,101,24,"chords"],[116,32,101,30],[116,33,101,31,"sort"],[116,37,101,35],[116,38,101,36,"sortChords"],[116,48,101,46],[116,49,101,47],[116,52,101,50,"chords"],[116,58,101,56],[117,4,102,2],[118,4,104,2,"chord"],[118,9,104,7],[118,10,104,8,"padAngle"],[118,18,104,16],[118,21,104,19],[118,31,104,28,"_"],[118,32,104,29],[118,34,104,31],[119,6,105,4],[119,13,105,11,"arguments"],[119,22,105,20],[119,23,105,21,"length"],[119,29,105,27],[119,33,105,31,"padAngle"],[119,41,105,39],[119,44,105,42],[119,48,105,42,"max"],[119,53,105,45],[119,54,105,45,"max"],[119,57,105,45],[119,59,105,46],[119,60,105,47],[119,62,105,49,"_"],[119,63,105,50],[119,64,105,51],[119,66,105,53,"chord"],[119,71,105,58],[119,75,105,62,"padAngle"],[119,83,105,70],[120,4,106,2],[120,5,106,3],[121,4,108,2,"chord"],[121,9,108,7],[121,10,108,8,"sortGroups"],[121,20,108,18],[121,23,108,21],[121,33,108,30,"_"],[121,34,108,31],[121,36,108,33],[122,6,109,4],[122,13,109,11,"arguments"],[122,22,109,20],[122,23,109,21,"length"],[122,29,109,27],[122,33,109,31,"sortGroups"],[122,43,109,41],[122,46,109,44,"_"],[122,47,109,45],[122,49,109,47,"chord"],[122,54,109,52],[122,58,109,56,"sortGroups"],[122,68,109,66],[123,4,110,2],[123,5,110,3],[124,4,112,2,"chord"],[124,9,112,7],[124,10,112,8,"sortSubgroups"],[124,23,112,21],[124,26,112,24],[124,36,112,33,"_"],[124,37,112,34],[124,39,112,36],[125,6,113,4],[125,13,113,11,"arguments"],[125,22,113,20],[125,23,113,21,"length"],[125,29,113,27],[125,33,113,31,"sortSubgroups"],[125,46,113,44],[125,49,113,47,"_"],[125,50,113,48],[125,52,113,50,"chord"],[125,57,113,55],[125,61,113,59,"sortSubgroups"],[125,74,113,72],[126,4,114,2],[126,5,114,3],[127,4,116,2,"chord"],[127,9,116,7],[127,10,116,8,"sortChords"],[127,20,116,18],[127,23,116,21],[127,33,116,30,"_"],[127,34,116,31],[127,36,116,33],[128,6,117,4],[128,13,117,11,"arguments"],[128,22,117,20],[128,23,117,21,"length"],[128,29,117,27],[128,33,117,31,"_"],[128,34,117,32],[128,38,117,36],[128,42,117,40],[128,45,117,43,"sortChords"],[128,55,117,53],[128,58,117,56],[128,62,117,60],[128,65,117,63],[128,66,117,64,"sortChords"],[128,76,117,74],[128,79,117,77,"compareValue"],[128,91,117,89],[128,92,117,90,"_"],[128,93,117,91],[128,94,117,92],[128,96,117,94,"_"],[128,97,117,95],[128,100,117,98,"_"],[128,101,117,99],[128,103,117,101,"chord"],[128,108,117,106],[128,112,117,110,"sortChords"],[128,122,117,120],[128,126,117,124,"sortChords"],[128,136,117,134],[128,137,117,135,"_"],[128,138,117,136],[129,4,118,2],[129,5,118,3],[130,4,120,2],[130,11,120,9,"chord"],[130,16,120,14],[131,2,121,0],[132,0,121,1],[132,3]],"functionMap":{"names":["<global>","compareValue","<anonymous>","default","chord","groupIndex.sort$argument_0","subgroupIndex.forEach$argument_0","d.sort$argument_0","padAngle","sortGroups","sortSubgroups","sortChords"],"mappings":"AAA;ACG;SCC;GDK;CDC;eGE;ECM;oCC0B;KDE;6CEG;aCC;ODE;KFC;GDgD;mBKE;GLE;qBME;GNE;wBOE;GPE;qBQE;GRE;CHG"},"hasCjsExports":false},"type":"js/module"}]}