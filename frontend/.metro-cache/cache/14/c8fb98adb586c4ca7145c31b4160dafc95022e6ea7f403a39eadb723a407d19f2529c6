{"dependencies":[{"name":"../pointEqual.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"bTb8/R+brlgBWcsPVsNecMs1wHQ=","exportNames":["*"],"imports":1}},{"name":"../math.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":35,"index":78}}],"key":"EHY+4/EILsXYW+F3tC7jV5/1Rdk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _ref;\n    }\n  });\n  var _pointEqualJs = require(_dependencyMap[0], \"../pointEqual.js\");\n  var pointEqual = _interopDefault(_pointEqualJs);\n  var _mathJs = require(_dependencyMap[1], \"../math.js\");\n  function Intersection(point, points, other, entry) {\n    this.x = point;\n    this.z = points;\n    this.o = other; // another intersection\n    this.e = entry; // is an entry?\n    this.v = false; // visited\n    this.n = this.p = null; // next & previous\n  }\n\n  // A generalized polygon clipping algorithm: given a polygon that has been cut\n  // into its visible line segments, and rejoins the segments by interpolating\n  // along the clip edge.\n  function _ref(segments, compareIntersection, startInside, interpolate, stream) {\n    var subject = [],\n      clip = [],\n      i,\n      n;\n    segments.forEach(function (segment) {\n      if ((n = segment.length - 1) <= 0) return;\n      var n,\n        p0 = segment[0],\n        p1 = segment[n],\n        x;\n      if ((0, pointEqual.default)(p0, p1)) {\n        if (!p0[2] && !p1[2]) {\n          stream.lineStart();\n          for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n          stream.lineEnd();\n          return;\n        }\n        // handle degenerate cases by moving the point\n        p1[0] += 2 * _mathJs.epsilon;\n      }\n      subject.push(x = new Intersection(p0, segment, null, true));\n      clip.push(x.o = new Intersection(p0, null, x, false));\n      subject.push(x = new Intersection(p1, segment, null, false));\n      clip.push(x.o = new Intersection(p1, null, x, true));\n    });\n    if (!subject.length) return;\n    clip.sort(compareIntersection);\n    link(subject);\n    link(clip);\n    for (i = 0, n = clip.length; i < n; ++i) {\n      clip[i].e = startInside = !startInside;\n    }\n    var start = subject[0],\n      points,\n      point;\n    while (1) {\n      // Find first unvisited intersection.\n      var current = start,\n        isSubject = true;\n      while (current.v) if ((current = current.n) === start) return;\n      points = current.z;\n      stream.lineStart();\n      do {\n        current.v = current.o.v = true;\n        if (current.e) {\n          if (isSubject) {\n            for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n          } else {\n            interpolate(current.x, current.n.x, 1, stream);\n          }\n          current = current.n;\n        } else {\n          if (isSubject) {\n            points = current.p.z;\n            for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n          } else {\n            interpolate(current.x, current.p.x, -1, stream);\n          }\n          current = current.p;\n        }\n        current = current.o;\n        points = current.z;\n        isSubject = !isSubject;\n      } while (!current.v);\n      stream.lineEnd();\n    }\n  }\n  function link(array) {\n    if (!(n = array.length)) return;\n    var n,\n      i = 0,\n      a = array[0],\n      b;\n    while (++i < n) {\n      a.n = b = array[i];\n      b.p = a;\n      a = b;\n    }\n    a.n = b = array[0];\n    b.p = a;\n  }\n});","lineCount":115,"map":[[12,2,16,15,"Object"],[12,8,16,15],[12,9,16,15,"defineProperty"],[12,23,16,15],[12,24,16,15,"exports"],[12,31,16,15],[13,4,16,15,"enumerable"],[13,14,16,15],[14,4,16,15,"get"],[14,7,16,15],[14,18,16,15,"get"],[14,19,16,15],[15,6,16,15],[15,13,16,15,"_ref"],[15,17,16,15],[16,4,16,15],[17,2,16,15],[18,2,1,0],[18,6,1,0,"_pointEqualJs"],[18,19,1,0],[18,22,1,0,"require"],[18,29,1,0],[18,30,1,0,"_dependencyMap"],[18,44,1,0],[19,2,1,0],[19,6,1,0,"pointEqual"],[19,16,1,0],[19,19,1,0,"_interopDefault"],[19,34,1,0],[19,35,1,0,"_pointEqualJs"],[19,48,1,0],[20,2,2,0],[20,6,2,0,"_mathJs"],[20,13,2,0],[20,16,2,0,"require"],[20,23,2,0],[20,24,2,0,"_dependencyMap"],[20,38,2,0],[21,2,4,0],[21,11,4,9,"Intersection"],[21,23,4,21,"Intersection"],[21,24,4,22,"point"],[21,29,4,27],[21,31,4,29,"points"],[21,37,4,35],[21,39,4,37,"other"],[21,44,4,42],[21,46,4,44,"entry"],[21,51,4,49],[21,53,4,51],[22,4,5,2],[22,8,5,6],[22,9,5,7,"x"],[22,10,5,8],[22,13,5,11,"point"],[22,18,5,16],[23,4,6,2],[23,8,6,6],[23,9,6,7,"z"],[23,10,6,8],[23,13,6,11,"points"],[23,19,6,17],[24,4,7,2],[24,8,7,6],[24,9,7,7,"o"],[24,10,7,8],[24,13,7,11,"other"],[24,18,7,16],[24,19,7,17],[24,20,7,18],[25,4,8,2],[25,8,8,6],[25,9,8,7,"e"],[25,10,8,8],[25,13,8,11,"entry"],[25,18,8,16],[25,19,8,17],[25,20,8,18],[26,4,9,2],[26,8,9,6],[26,9,9,7,"v"],[26,10,9,8],[26,13,9,11],[26,18,9,16],[26,19,9,17],[26,20,9,18],[27,4,10,2],[27,8,10,6],[27,9,10,7,"n"],[27,10,10,8],[27,13,10,11],[27,17,10,15],[27,18,10,16,"p"],[27,19,10,17],[27,22,10,20],[27,26,10,24],[27,27,10,25],[27,28,10,26],[28,2,11,0],[30,2,13,0],[31,2,14,0],[32,2,15,0],[33,2,16,15],[33,11,16,15,"_ref"],[33,16,16,24,"segments"],[33,24,16,32],[33,26,16,34,"compareIntersection"],[33,45,16,53],[33,47,16,55,"startInside"],[33,58,16,66],[33,60,16,68,"interpolate"],[33,71,16,79],[33,73,16,81,"stream"],[33,79,16,87],[33,81,16,89],[34,4,17,2],[34,8,17,6,"subject"],[34,15,17,13],[34,18,17,16],[34,20,17,18],[35,6,18,6,"clip"],[35,10,18,10],[35,13,18,13],[35,15,18,15],[36,6,19,6,"i"],[36,7,19,7],[37,6,20,6,"n"],[37,7,20,7],[38,4,22,2,"segments"],[38,12,22,10],[38,13,22,11,"forEach"],[38,20,22,18],[38,21,22,19],[38,31,22,28,"segment"],[38,38,22,35],[38,40,22,37],[39,6,23,4],[39,10,23,8],[39,11,23,9,"n"],[39,12,23,10],[39,15,23,13,"segment"],[39,22,23,20],[39,23,23,21,"length"],[39,29,23,27],[39,32,23,30],[39,33,23,31],[39,38,23,36],[39,39,23,37],[39,41,23,39],[40,6,24,4],[40,10,24,8,"n"],[40,11,24,9],[41,8,24,11,"p0"],[41,10,24,13],[41,13,24,16,"segment"],[41,20,24,23],[41,21,24,24],[41,22,24,25],[41,23,24,26],[42,8,24,28,"p1"],[42,10,24,30],[42,13,24,33,"segment"],[42,20,24,40],[42,21,24,41,"n"],[42,22,24,42],[42,23,24,43],[43,8,24,45,"x"],[43,9,24,46],[44,6,26,4],[44,10,26,8],[44,14,26,8,"pointEqual"],[44,24,26,18],[44,25,26,18,"default"],[44,32,26,18],[44,34,26,19,"p0"],[44,36,26,21],[44,38,26,23,"p1"],[44,40,26,25],[44,41,26,26],[44,43,26,28],[45,8,27,6],[45,12,27,10],[45,13,27,11,"p0"],[45,15,27,13],[45,16,27,14],[45,17,27,15],[45,18,27,16],[45,22,27,20],[45,23,27,21,"p1"],[45,25,27,23],[45,26,27,24],[45,27,27,25],[45,28,27,26],[45,30,27,28],[46,10,28,8,"stream"],[46,16,28,14],[46,17,28,15,"lineStart"],[46,26,28,24],[46,27,28,25],[46,28,28,26],[47,10,29,8],[47,15,29,13,"i"],[47,16,29,14],[47,19,29,17],[47,20,29,18],[47,22,29,20,"i"],[47,23,29,21],[47,26,29,24,"n"],[47,27,29,25],[47,29,29,27],[47,31,29,29,"i"],[47,32,29,30],[47,34,29,32,"stream"],[47,40,29,38],[47,41,29,39,"point"],[47,46,29,44],[47,47,29,45],[47,48,29,46,"p0"],[47,50,29,48],[47,53,29,51,"segment"],[47,60,29,58],[47,61,29,59,"i"],[47,62,29,60],[47,63,29,61],[47,65,29,63],[47,66,29,64],[47,67,29,65],[47,69,29,67,"p0"],[47,71,29,69],[47,72,29,70],[47,73,29,71],[47,74,29,72],[47,75,29,73],[48,10,30,8,"stream"],[48,16,30,14],[48,17,30,15,"lineEnd"],[48,24,30,22],[48,25,30,23],[48,26,30,24],[49,10,31,8],[50,8,32,6],[51,8,33,6],[52,8,34,6,"p1"],[52,10,34,8],[52,11,34,9],[52,12,34,10],[52,13,34,11],[52,17,34,15],[52,18,34,16],[52,21,34,19,"epsilon"],[52,28,34,26],[52,29,34,26,"epsilon"],[52,36,34,26],[53,6,35,4],[54,6,37,4,"subject"],[54,13,37,11],[54,14,37,12,"push"],[54,18,37,16],[54,19,37,17,"x"],[54,20,37,18],[54,23,37,21],[54,27,37,25,"Intersection"],[54,39,37,37],[54,40,37,38,"p0"],[54,42,37,40],[54,44,37,42,"segment"],[54,51,37,49],[54,53,37,51],[54,57,37,55],[54,59,37,57],[54,63,37,61],[54,64,37,62],[54,65,37,63],[55,6,38,4,"clip"],[55,10,38,8],[55,11,38,9,"push"],[55,15,38,13],[55,16,38,14,"x"],[55,17,38,15],[55,18,38,16,"o"],[55,19,38,17],[55,22,38,20],[55,26,38,24,"Intersection"],[55,38,38,36],[55,39,38,37,"p0"],[55,41,38,39],[55,43,38,41],[55,47,38,45],[55,49,38,47,"x"],[55,50,38,48],[55,52,38,50],[55,57,38,55],[55,58,38,56],[55,59,38,57],[56,6,39,4,"subject"],[56,13,39,11],[56,14,39,12,"push"],[56,18,39,16],[56,19,39,17,"x"],[56,20,39,18],[56,23,39,21],[56,27,39,25,"Intersection"],[56,39,39,37],[56,40,39,38,"p1"],[56,42,39,40],[56,44,39,42,"segment"],[56,51,39,49],[56,53,39,51],[56,57,39,55],[56,59,39,57],[56,64,39,62],[56,65,39,63],[56,66,39,64],[57,6,40,4,"clip"],[57,10,40,8],[57,11,40,9,"push"],[57,15,40,13],[57,16,40,14,"x"],[57,17,40,15],[57,18,40,16,"o"],[57,19,40,17],[57,22,40,20],[57,26,40,24,"Intersection"],[57,38,40,36],[57,39,40,37,"p1"],[57,41,40,39],[57,43,40,41],[57,47,40,45],[57,49,40,47,"x"],[57,50,40,48],[57,52,40,50],[57,56,40,54],[57,57,40,55],[57,58,40,56],[58,4,41,2],[58,5,41,3],[58,6,41,4],[59,4,43,2],[59,8,43,6],[59,9,43,7,"subject"],[59,16,43,14],[59,17,43,15,"length"],[59,23,43,21],[59,25,43,23],[60,4,45,2,"clip"],[60,8,45,6],[60,9,45,7,"sort"],[60,13,45,11],[60,14,45,12,"compareIntersection"],[60,33,45,31],[60,34,45,32],[61,4,46,2,"link"],[61,8,46,6],[61,9,46,7,"subject"],[61,16,46,14],[61,17,46,15],[62,4,47,2,"link"],[62,8,47,6],[62,9,47,7,"clip"],[62,13,47,11],[62,14,47,12],[63,4,49,2],[63,9,49,7,"i"],[63,10,49,8],[63,13,49,11],[63,14,49,12],[63,16,49,14,"n"],[63,17,49,15],[63,20,49,18,"clip"],[63,24,49,22],[63,25,49,23,"length"],[63,31,49,29],[63,33,49,31,"i"],[63,34,49,32],[63,37,49,35,"n"],[63,38,49,36],[63,40,49,38],[63,42,49,40,"i"],[63,43,49,41],[63,45,49,43],[64,6,50,4,"clip"],[64,10,50,8],[64,11,50,9,"i"],[64,12,50,10],[64,13,50,11],[64,14,50,12,"e"],[64,15,50,13],[64,18,50,16,"startInside"],[64,29,50,27],[64,32,50,30],[64,33,50,31,"startInside"],[64,44,50,42],[65,4,51,2],[66,4,53,2],[66,8,53,6,"start"],[66,13,53,11],[66,16,53,14,"subject"],[66,23,53,21],[66,24,53,22],[66,25,53,23],[66,26,53,24],[67,6,54,6,"points"],[67,12,54,12],[68,6,55,6,"point"],[68,11,55,11],[69,4,57,2],[69,11,57,9],[69,12,57,10],[69,14,57,12],[70,6,58,4],[71,6,59,4],[71,10,59,8,"current"],[71,17,59,15],[71,20,59,18,"start"],[71,25,59,23],[72,8,60,8,"isSubject"],[72,17,60,17],[72,20,60,20],[72,24,60,24],[73,6,61,4],[73,13,61,11,"current"],[73,20,61,18],[73,21,61,19,"v"],[73,22,61,20],[73,24,61,22],[73,28,61,26],[73,29,61,27,"current"],[73,36,61,34],[73,39,61,37,"current"],[73,46,61,44],[73,47,61,45,"n"],[73,48,61,46],[73,54,61,52,"start"],[73,59,61,57],[73,61,61,59],[74,6,62,4,"points"],[74,12,62,10],[74,15,62,13,"current"],[74,22,62,20],[74,23,62,21,"z"],[74,24,62,22],[75,6,63,4,"stream"],[75,12,63,10],[75,13,63,11,"lineStart"],[75,22,63,20],[75,23,63,21],[75,24,63,22],[76,6,64,4],[76,9,64,7],[77,8,65,6,"current"],[77,15,65,13],[77,16,65,14,"v"],[77,17,65,15],[77,20,65,18,"current"],[77,27,65,25],[77,28,65,26,"o"],[77,29,65,27],[77,30,65,28,"v"],[77,31,65,29],[77,34,65,32],[77,38,65,36],[78,8,66,6],[78,12,66,10,"current"],[78,19,66,17],[78,20,66,18,"e"],[78,21,66,19],[78,23,66,21],[79,10,67,8],[79,14,67,12,"isSubject"],[79,23,67,21],[79,25,67,23],[80,12,68,10],[80,17,68,15,"i"],[80,18,68,16],[80,21,68,19],[80,22,68,20],[80,24,68,22,"n"],[80,25,68,23],[80,28,68,26,"points"],[80,34,68,32],[80,35,68,33,"length"],[80,41,68,39],[80,43,68,41,"i"],[80,44,68,42],[80,47,68,45,"n"],[80,48,68,46],[80,50,68,48],[80,52,68,50,"i"],[80,53,68,51],[80,55,68,53,"stream"],[80,61,68,59],[80,62,68,60,"point"],[80,67,68,65],[80,68,68,66],[80,69,68,67,"point"],[80,74,68,72],[80,77,68,75,"points"],[80,83,68,81],[80,84,68,82,"i"],[80,85,68,83],[80,86,68,84],[80,88,68,86],[80,89,68,87],[80,90,68,88],[80,92,68,90,"point"],[80,97,68,95],[80,98,68,96],[80,99,68,97],[80,100,68,98],[80,101,68,99],[81,10,69,8],[81,11,69,9],[81,17,69,15],[82,12,70,10,"interpolate"],[82,23,70,21],[82,24,70,22,"current"],[82,31,70,29],[82,32,70,30,"x"],[82,33,70,31],[82,35,70,33,"current"],[82,42,70,40],[82,43,70,41,"n"],[82,44,70,42],[82,45,70,43,"x"],[82,46,70,44],[82,48,70,46],[82,49,70,47],[82,51,70,49,"stream"],[82,57,70,55],[82,58,70,56],[83,10,71,8],[84,10,72,8,"current"],[84,17,72,15],[84,20,72,18,"current"],[84,27,72,25],[84,28,72,26,"n"],[84,29,72,27],[85,8,73,6],[85,9,73,7],[85,15,73,13],[86,10,74,8],[86,14,74,12,"isSubject"],[86,23,74,21],[86,25,74,23],[87,12,75,10,"points"],[87,18,75,16],[87,21,75,19,"current"],[87,28,75,26],[87,29,75,27,"p"],[87,30,75,28],[87,31,75,29,"z"],[87,32,75,30],[88,12,76,10],[88,17,76,15,"i"],[88,18,76,16],[88,21,76,19,"points"],[88,27,76,25],[88,28,76,26,"length"],[88,34,76,32],[88,37,76,35],[88,38,76,36],[88,40,76,38,"i"],[88,41,76,39],[88,45,76,43],[88,46,76,44],[88,48,76,46],[88,50,76,48,"i"],[88,51,76,49],[88,53,76,51,"stream"],[88,59,76,57],[88,60,76,58,"point"],[88,65,76,63],[88,66,76,64],[88,67,76,65,"point"],[88,72,76,70],[88,75,76,73,"points"],[88,81,76,79],[88,82,76,80,"i"],[88,83,76,81],[88,84,76,82],[88,86,76,84],[88,87,76,85],[88,88,76,86],[88,90,76,88,"point"],[88,95,76,93],[88,96,76,94],[88,97,76,95],[88,98,76,96],[88,99,76,97],[89,10,77,8],[89,11,77,9],[89,17,77,15],[90,12,78,10,"interpolate"],[90,23,78,21],[90,24,78,22,"current"],[90,31,78,29],[90,32,78,30,"x"],[90,33,78,31],[90,35,78,33,"current"],[90,42,78,40],[90,43,78,41,"p"],[90,44,78,42],[90,45,78,43,"x"],[90,46,78,44],[90,48,78,46],[90,49,78,47],[90,50,78,48],[90,52,78,50,"stream"],[90,58,78,56],[90,59,78,57],[91,10,79,8],[92,10,80,8,"current"],[92,17,80,15],[92,20,80,18,"current"],[92,27,80,25],[92,28,80,26,"p"],[92,29,80,27],[93,8,81,6],[94,8,82,6,"current"],[94,15,82,13],[94,18,82,16,"current"],[94,25,82,23],[94,26,82,24,"o"],[94,27,82,25],[95,8,83,6,"points"],[95,14,83,12],[95,17,83,15,"current"],[95,24,83,22],[95,25,83,23,"z"],[95,26,83,24],[96,8,84,6,"isSubject"],[96,17,84,15],[96,20,84,18],[96,21,84,19,"isSubject"],[96,30,84,28],[97,6,85,4],[97,7,85,5],[97,15,85,13],[97,16,85,14,"current"],[97,23,85,21],[97,24,85,22,"v"],[97,25,85,23],[98,6,86,4,"stream"],[98,12,86,10],[98,13,86,11,"lineEnd"],[98,20,86,18],[98,21,86,19],[98,22,86,20],[99,4,87,2],[100,2,88,0],[101,2,90,0],[101,11,90,9,"link"],[101,15,90,13,"link"],[101,16,90,14,"array"],[101,21,90,19],[101,23,90,21],[102,4,91,2],[102,8,91,6],[102,10,91,8,"n"],[102,11,91,9],[102,14,91,12,"array"],[102,19,91,17],[102,20,91,18,"length"],[102,26,91,24],[102,27,91,25],[102,29,91,27],[103,4,92,2],[103,8,92,6,"n"],[103,9,92,7],[104,6,93,6,"i"],[104,7,93,7],[104,10,93,10],[104,11,93,11],[105,6,94,6,"a"],[105,7,94,7],[105,10,94,10,"array"],[105,15,94,15],[105,16,94,16],[105,17,94,17],[105,18,94,18],[106,6,95,6,"b"],[106,7,95,7],[107,4,96,2],[107,11,96,9],[107,13,96,11,"i"],[107,14,96,12],[107,17,96,15,"n"],[107,18,96,16],[107,20,96,18],[108,6,97,4,"a"],[108,7,97,5],[108,8,97,6,"n"],[108,9,97,7],[108,12,97,10,"b"],[108,13,97,11],[108,16,97,14,"array"],[108,21,97,19],[108,22,97,20,"i"],[108,23,97,21],[108,24,97,22],[109,6,98,4,"b"],[109,7,98,5],[109,8,98,6,"p"],[109,9,98,7],[109,12,98,10,"a"],[109,13,98,11],[110,6,99,4,"a"],[110,7,99,5],[110,10,99,8,"b"],[110,11,99,9],[111,4,100,2],[112,4,101,2,"a"],[112,5,101,3],[112,6,101,4,"n"],[112,7,101,5],[112,10,101,8,"b"],[112,11,101,9],[112,14,101,12,"array"],[112,19,101,17],[112,20,101,18],[112,21,101,19],[112,22,101,20],[113,4,102,2,"b"],[113,5,102,3],[113,6,102,4,"p"],[113,7,102,5],[113,10,102,8,"a"],[113,11,102,9],[114,2,103,0],[115,0,103,1],[115,3]],"functionMap":{"names":["<global>","Intersection","default","segments.forEach$argument_0","link"],"mappings":"AAA;ACG;CDO;eEK;mBCM;GDmB;CF+C;AIE;CJa"},"hasCjsExports":false},"type":"js/module"}]}